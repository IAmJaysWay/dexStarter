!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).proxyCompare={})}(this,function(e){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=Symbol(),o=Symbol(),a="a",i="w",f=function(e,t){return new Proxy(e,t)},u=Object.getPrototypeOf,c=new WeakMap,l=function(e){return e&&(c.has(e)?c.get(e):u(e)===Object.prototype||u(e)===Array.prototype)},s=function(e){return"object"==typeof e&&null!==e},p=new WeakMap,y=function(e){return e[o]||e},v=function(e,t,r){if(!l(e))return e;var c=y(e),s=function(e){return Object.isFrozen(e)||Object.values(Object.getOwnPropertyDescriptors(e)).some(function(e){return!e.writable})}(c),g=r&&r.get(c);return g&&g[1].f===s||((g=function(e,t){var r,f=((r={}).f=t,r),u=!1,c=function(t,r){if(!u){var n=f[a].get(e);if(n||f[a].set(e,n={}),t===i)n[i]=!0;else{var o=n[t];o||(o=new Set,n[t]=o),o.add(r)}}},l={get:function(t,r){return r===o?e:(c("k",r),v(Reflect.get(t,r),f[a],f.c))},has:function(t,r){return r===n?(u=!0,f[a].delete(e),!0):(c("h",r),Reflect.has(t,r))},getOwnPropertyDescriptor:function(e,t){return c("o",t),Reflect.getOwnPropertyDescriptor(e,t)},ownKeys:function(e){return c(i),Reflect.ownKeys(e)}};return t&&(l.set=l.deleteProperty=function(){return!1}),[l,f]}(c,s))[1].p=f(s?function(e){var t=p.get(e);if(!t){if(Array.isArray(e))t=Array.from(e);else{var r=Object.getOwnPropertyDescriptors(e);Object.values(r).forEach(function(e){e.configurable=!0}),t=Object.create(u(e),r)}p.set(e,t)}return t}(c):c,g[0]),r&&r.set(c,g)),g[1][a]=t,g[1].c=r,g[1].p};e.affectedToPathList=function(e,t,r){var n=[],o=new WeakSet;return function e(a,f){if(!o.has(a)){s(a)&&o.add(a);var u=s(a)&&t.get(y(a));if(u){var c,l;if(null==(c=u.h)||c.forEach(function(e){var t=":has("+String(e)+")";n.push(f?[].concat(f,[t]):[t])}),!0===u[i]){var p=":ownKeys";n.push(f?[].concat(f,[p]):[p])}else{var v;null==(v=u.o)||v.forEach(function(e){var t=":hasOwn("+String(e)+")";n.push(f?[].concat(f,[t]):[t])})}null==(l=u.k)||l.forEach(function(t){r&&!("value"in(Object.getOwnPropertyDescriptor(a,t)||{}))||e(a[t],f?[].concat(f,[t]):[t])})}else f&&n.push(f)}}(e),n},e.createProxy=v,e.getUntracked=function(e){return l(e)&&e[o]||null},e.isChanged=function e(t,n,o,a){if(Object.is(t,n))return!1;if(!s(t)||!s(n))return!0;var f=o.get(y(t));if(!f)return!0;if(a){var u,c=a.get(t);if(c&&c.n===n)return c.g;a.set(t,((u={}).n=n,u.g=!1,u))}var l=null;try{for(var p,v=r(f.h||[]);!(p=v()).done;){var g=p.value;if(l=Reflect.has(t,g)!==Reflect.has(n,g))return l}if(!0===f[i]){if(l=function(e,t){var r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some(function(e,t){return e!==n[t]})}(t,n),l)return l}else for(var h,d=r(f.o||[]);!(h=d()).done;){var b=h.value;if(l=!!Reflect.getOwnPropertyDescriptor(t,b)!=!!Reflect.getOwnPropertyDescriptor(n,b))return l}for(var w,m=r(f.k||[]);!(w=m()).done;){var O=w.value;if(l=e(t[O],n[O],o,a))return l}return null===l&&(l=!0),l}finally{var j;a&&a.set(t,((j={}).n=n,j.g=l,j))}},e.markToTrack=function(e,t){void 0===t&&(t=!0),c.set(e,t)},e.replaceNewProxy=function(e){f=e},e.trackMemo=function(e){return!!l(e)&&n in e}});
//# sourceMappingURL=index.umd.js.map
